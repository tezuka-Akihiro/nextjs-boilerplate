# Next.js 汎用ボイラープレート移行計画書

## 移行目的
現在の個人Webアプリケーション開発プロジェクトを、外部サービスに依存しない汎用的なNext.jsローカルブラウザ用ボイラープレートに変換する。

## 分析結果概要

### プロジェクト構成分析
- **フレームワーク**: Next.js 15.5.2 + React 19.1.1 + TypeScript
- **アーキテクチャ**: AI滑走路4層アーキテクチャ（API/Controller/Task/Resource）
- **テスト**: Vitest + Testing Library + Playwright
- **スタイル**: TailwindCSS
- **外部連携サービス**: Supabase、Vercel、Sentry、reCAPTCHA v3

## 修正計画

### 1. 削除対象（外部サービス依存）

#### A. パッケージ削除
**dependencies:**
- `@sentry/nextjs` - エラートラッキング
- `@supabase/ssr`, `@supabase/supabase-js` - データベース
- `@vercel/analytics`, `@vercel/speed-insights` - 分析ツール  
- `react-google-recaptcha-v3` - スパム対策
- `resend` - メール送信

**devDependencies:**
- `supabase` - CLI

#### B. ファイル削除
**外部サービス固有ファイル:**
- `src/lib/supabase/` ディレクトリ全体
- `src/lib/supabase.ts`
- `middleware.ts` （Supabase認証用）
- `vercel.json`
- `scripts/setup-rls.js`
- `scripts/clean-vercel-deployments.sh`

**テスト関連:**
- `tests/backend/mocks/supabase.mock.ts`
- `tests/backend/utils/supabase-test-client.ts`
- Supabase依存の全テストファイル

**設定・環境ファイル:**
- `.env.example` （外部サービス環境変数含む）
- `.github/workflows/` ディレクトリ全体

#### C. スクリプト削除/修正
**package.json削除対象スクリプト:**
- `db:*` - Supabaseデータベース操作
- `monitoring:*` - 外部監視サービス
- `sentry:*` - Sentry関連
- `deploy:*` - Vercelデプロイ
- `external-services:check`

### 2. 汎用化対象（修正・シンプル化）

#### A. 基本設定の汎用化
**package.json修正:**
```json
{
  "name": "nextjs-universal-boilerplate",
  "description": "A minimalist Next.js boilerplate for local development",
  "scripts": {
    "dev": "next dev",
    "build": "next build", 
    "start": "next start",
    "lint": "next lint",
    "test": "vitest run",
    "test:watch": "vitest"
  }
}
```

#### B. アプリケーション層の汎用化
**src/app/page.tsx修正:**
- プロジェクト固有文言の削除（"projectname", "積み上げる、男磨きアプリ"）
- シンプルなウェルカムページに変更
- 外部サービス依存のフォーム削除

**src/app/layout.tsx修正:**
- メタデータの汎用化
- 外部サービス統合コードの削除

#### C. コンポーネントの汎用化
**src/app/components/修正:**
- `RecaptchaProvider.tsx` - 削除
- UIコンポーネント群は保持（Button.tsx, Card.tsx等）
- Header/Footer - 外部サービス依存部分削除

#### D. ドキュメントの汎用化
**docs/修正対象:**
- プロジェクト固有記述の削除・汎用化
- 外部サービス設定手順の削除
- アーキテクチャドキュメントの簡素化

#### E. 設定ファイル修正
**next.config.ts:**
- Sentry設定削除
- 分析ツール設定削除
- 基本的なNext.js設定のみ保持

### 3. 残存・活用するもの

#### A. 開発基盤（そのまま活用）
- AI滑走路4層アーキテクチャ
- TypeScript設定
- ESLint + Prettier設定
- Vitest + Testing Library設定
- TailwindCSS設定

#### B. テンプレート（そのまま活用）  
- `docs/templates/` 全体
- バックエンド層テンプレート
- テストテンプレート
- 要件定義テンプレート

#### C. 開発支援ツール
- カバレッジレポート
- 型チェック
- フォーマット・リント

## 実行手順

### Phase 1: 外部依存削除
1. package.json から外部サービス依存パッケージ削除
2. 環境変数・設定ファイルの削除
3. 外部サービス固有ファイル・ディレクトリの削除
4. 不要なスクリプト削除

### Phase 2: 汎用化修正  
1. アプリ名・説明の汎用化
2. ページコンテンツのシンプル化
3. コンポーネントから外部依存削除
4. 設定ファイルの簡素化

### Phase 3: ドキュメント整備
1. README の汎用ボイラープレート用に書き換え
2. docs/ 配下の外部サービス記述削除
3. セットアップ手順の簡素化

### Phase 4: 動作確認
1. `npm install` での依存関係解決確認  
2. `npm run dev` でのローカル起動確認
3. `npm run build` でのビルド確認
4. `npm run test` でのテスト実行確認

## 成果物
- 外部サービス依存のない汎用Next.jsボイラープレート
- シンプルなローカル開発環境
- 再利用可能なアーキテクチャ・テンプレート
- 最小限の設定でのクイックスタート対応

## 注意事項
- 現在は設計中のため実装は行わない
- 個人開発向けミニマム・シンプル構成を維持
- アーキテクチャの整合性は保持する