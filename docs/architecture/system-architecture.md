# projectname ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

## ğŸ—ï¸ å…¨ä½“ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“å›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ“± Client Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Next.js 15 (App Router) + TypeScript + Tailwind CSS          â”‚
â”‚                      ğŸ¯ SPA Architecture                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ–¥ï¸ Frontend SPA Services (src/app/)                           â”‚
â”‚  â”œâ”€â”€ status/                  # ç”·ç£¨ãç©ã¿ä¸Šã’SPA                â”‚
â”‚  â”œâ”€â”€ social/                  # ç”·ç£¨ãSNSSPA                    â”‚
â”‚  â”œâ”€â”€ components/              # ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ        â”‚
â”‚  â””â”€â”€ hooks/                   # SPAçŠ¶æ…‹ç®¡ç†ãƒ•ãƒƒã‚¯               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTPS API Calls
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸŒ API Gateway Layer                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Next.js API Routes                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”Œ API Layer (src/backend/api/) - SPAçµ±åˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ        â”‚
â”‚  â”œâ”€â”€ StatusDashboardApi.ts   # ç©ã¿ä¸Šã’SPAç”¨çµ±åˆAPI              â”‚
â”‚  â”œâ”€â”€ SocialDashboardApi.ts   # SNSSPAç”¨çµ±åˆAPI                  â”‚
â”‚  â”œâ”€â”€ RealtimeApi.ts          # WebSocketãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ              â”‚
â”‚  â””â”€â”€ SharedDataApi.ts        # SPAé–“å…±æœ‰ãƒ‡ãƒ¼ã‚¿API               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTP Request/Response
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ¯ Business Logic Layer                       â”‚
â”‚                   AIæ»‘èµ°è·¯4å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“‹ Controller Layer (src/backend/controllers/) - SPAçµ±åˆåˆ¶å¾¡   â”‚
â”‚  â”œâ”€â”€ StatusDashboardController.ts  # ç©ã¿ä¸Šã’SPAçµ±åˆåˆ¶å¾¡         â”‚
â”‚  â”œâ”€â”€ SocialDashboardController.ts  # SNSSPAçµ±åˆåˆ¶å¾¡             â”‚
â”‚  â””â”€â”€ RealtimeSyncController.ts     # SPAé–“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ       â”‚
â”‚                                                                 â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â–¼                               â”‚
â”‚                                                                 â”‚
â”‚  âš™ï¸ Task Layer (src/backend/tasks/)                             â”‚
â”‚  â”œâ”€â”€ CreateUserTask.ts      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆå‡¦ç†                   â”‚
â”‚  â”œâ”€â”€ ValidateUserTask.ts    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼å‡¦ç†                   â”‚
â”‚  â”œâ”€â”€ CreatePostTask.ts      # æŠ•ç¨¿ä½œæˆå‡¦ç†                       â”‚
â”‚  â”œâ”€â”€ UpdateUserStatusTask.ts # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°å‡¦ç†               â”‚
â”‚  â”œâ”€â”€ CalculateExperienceTask.ts # çµŒé¨“å€¤è¨ˆç®—å‡¦ç†                â”‚
â”‚  â””â”€â”€ ProcessGirlfriendGetTask.ts # å½¼å¥³GETç‰¹åˆ¥å‡¦ç†              â”‚
â”‚                                                                 â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â–¼                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ—„ï¸ Resource Layer (src/backend/resources/)                     â”‚
â”‚  â”œâ”€â”€ UserResource.ts        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹             â”‚
â”‚  â”œâ”€â”€ PostResource.ts        # æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹                 â”‚
â”‚  â”œâ”€â”€ DailyCountResource.ts  # æ—¥æ¬¡ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹          â”‚
â”‚  â”œâ”€â”€ PresetCommentResource.ts # å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹          â”‚
â”‚  â””â”€â”€ ErrorLogResource.ts    # ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹           â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“¤ Response Layer (src/backend/responses/)                     â”‚
â”‚  â”œâ”€â”€ AuthResponse.ts        # èªè¨¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹çµ±ä¸€                 â”‚
â”‚  â”œâ”€â”€ UserResponse.ts        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹çµ±ä¸€             â”‚
â”‚  â”œâ”€â”€ PostResponse.ts        # æŠ•ç¨¿ãƒ¬ã‚¹ãƒãƒ³ã‚¹çµ±ä¸€                 â”‚
â”‚  â””â”€â”€ ErrorResponse.ts       # ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹çµ±ä¸€               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ SQL Queries
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ—„ï¸ Data Layer                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       Supabase                                 â”‚
â”‚                                                                 â”‚
â”‚  ğŸ” Supabase Auth        ğŸ—„ï¸ PostgreSQL Database                 â”‚
â”‚  â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼         â”œâ”€â”€ users (ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±)                 â”‚
â”‚  â”œâ”€â”€ ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†       â”œâ”€â”€ posts (æŠ•ç¨¿åŸºæœ¬æƒ…å ±)                 â”‚
â”‚  â””â”€â”€ JWTãƒˆãƒ¼ã‚¯ãƒ³         â”œâ”€â”€ self_investment_posts (è‡ªå·±æŠ•è³‡)      â”‚
â”‚                         â”œâ”€â”€ date_posts (ãƒ‡ãƒ¼ãƒˆæŠ•ç¨¿)               â”‚
â”‚                         â”œâ”€â”€ habit_declaration_posts (ç¿’æ…£å®£è¨€)   â”‚
â”‚                         â”œâ”€â”€ girlfriend_get_posts (å½¼å¥³GET)       â”‚
â”‚                         â”œâ”€â”€ daily_counts (æ—¥æ¬¡ã‚«ã‚¦ãƒ³ãƒˆ)           â”‚
â”‚                         â”œâ”€â”€ preset_comments (å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆ)        â”‚
â”‚                         â”œâ”€â”€ preset_comment_types (å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆç¨®åˆ¥) â”‚
â”‚                         â”œâ”€â”€ daily_comment_limits (åˆ¶é™ç®¡ç†)       â”‚
â”‚                         â”œâ”€â”€ error_logs (ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°)               â”‚
â”‚                         â””â”€â”€ girlfriend_get_error_logs (ç‰¹åˆ¥ç›£è¦–) â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š Supabase Realtime   ğŸ¯ Row Level Security (RLS)             â”‚
â”‚  â”œâ”€â”€ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°     â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡                â”‚
â”‚  â””â”€â”€ è³¼èª­å‹ãƒ‡ãƒ¼ã‚¿é…ä¿¡     â””â”€â”€ ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ¼ã‚¿ä¿è­·                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

### 1. é€šå¸¸æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼
```
User Action â†’ Frontend â†’ API â†’ Controller â†’ Task â†’ Resource â†’ Database
    â”‚                                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Response â† Response â† Task â† Controller â†â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. SPAçµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼
```
User Action (SPAå†…æ“ä½œ) â†’ Frontend Dashboard Section
            â”‚
            â–¼
   SPA Dashboard API (ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥çµ±åˆãƒ‡ãƒ¼ã‚¿å–å¾—)
            â”‚
            â–¼
  DashboardController (è¤‡æ•°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿çµ±åˆ)
            â”‚
            â–¼
   â”Œâ”€ GetDashboardDataTask (å…¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±)
   â”œâ”€ UpdateSectionDataTask (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°)
   â”œâ”€ SyncBetweenSectionsTask (ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“åŒæœŸ)
   â””â”€ BroadcastToSectionsTask (çŠ¶æ…‹å¤‰æ›´é€šçŸ¥)
            â”‚
            â–¼
   â”Œâ”€ StatusResource (ç¿’æ…£ãƒ»æœŸæ—¥ãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒ )
   â”œâ”€ SocialResource (æŠ•ç¨¿ãƒ»SNSãƒ»å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆ)
   â”œâ”€ UserResource (ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ»èªè¨¼ã‚¤ãƒ³ãƒ•ãƒ©)
   â””â”€ RealtimeResource (WebSocketåŒæœŸ)
            â”‚
            â–¼
     Database + WebSocket
            â”‚
            â–¼
   Unified Dashboard Response â†’ SPA Sections â†’ User
```

## ğŸ—ï¸ å±¤é–“ä¾å­˜é–¢ä¿‚å›³

### AIæ»‘èµ°è·¯4å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Layer â”‚â”€â”€â”€â–¶â”‚ Controller   â”‚â”€â”€â”€â–¶â”‚  Task Layer  â”‚â”€â”€â”€â–¶â”‚ Resource     â”‚
â”‚             â”‚    â”‚   Layer      â”‚    â”‚              â”‚    â”‚   Layer      â”‚
â”‚ HTTP Requestâ”‚    â”‚ Business     â”‚    â”‚ Single Unit  â”‚    â”‚ Data Access  â”‚
â”‚ Validation  â”‚    â”‚ Integration  â”‚    â”‚ Processing   â”‚    â”‚ External API â”‚
â”‚ Basic Auth  â”‚    â”‚ Orchestrationâ”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â–¼                  â–¼                  â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Response    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚   Layer      â”‚
                    â”‚ Unified      â”‚
                    â”‚ Error Handle â”‚
                    â”‚ Format       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾å­˜ãƒ«ãƒ¼ãƒ«ï¼ˆå³æ ¼ï¼‰
- âœ… **éš£æ¥å±¤ã®ã¿ä¾å­˜å¯**: API â†’ Controller â†’ Task â†’ Resource
- âœ… **Responseå±¤ã¯ã©ã®å±¤ã‹ã‚‰ã§ã‚‚åˆ©ç”¨å¯**: çµ±ä¸€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
- âŒ **éšå±¤é£›ã³è¶Šã—ç¦æ­¢**: API â†’ Taskã€Controller â†’ Resource ç­‰
- âŒ **ä¸‹ä½å±¤ã‹ã‚‰ä¸Šä½å±¤ã¸ã®ä¾å­˜ç¦æ­¢**: Resource â†’ Task ç­‰

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### èªè¨¼ãƒ»èªå¯ãƒ•ãƒ­ãƒ¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚â”€â”€â”€â–¶â”‚   Next.js    â”‚â”€â”€â”€â–¶â”‚  Supabase    â”‚â”€â”€â”€â–¶â”‚ PostgreSQL   â”‚
â”‚             â”‚    â”‚   Frontend   â”‚    â”‚    Auth      â”‚    â”‚   Database   â”‚
â”‚ Login Form  â”‚    â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â–¼                  â–¼                  â–¼
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ JWT Token    â”‚â”€â”€â”€â–¶â”‚ RLS Policies â”‚â”€â”€â”€â–¶â”‚ Row Level    â”‚
                    â”‚ Validation   â”‚    â”‚ Enforcement  â”‚    â”‚ Security     â”‚
                    â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Row Level Security (RLS) æ§‹æˆ
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
CREATE POLICY "Users can only access own data" ON users
  FOR ALL USING (auth.uid() = id);

-- æŠ•ç¨¿ã¯å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–²è¦§å¯ã€è‡ªåˆ†ã®æŠ•ç¨¿ã®ã¿ç·¨é›†å¯
CREATE POLICY "All users can view posts" ON posts
  FOR SELECT USING (true);

CREATE POLICY "Users can only edit own posts" ON posts  
  FOR UPDATE USING (auth.uid() = user_id);
```

## ğŸŒ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æœ¬ç•ªç’°å¢ƒæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸŒ Internet                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ğŸš€ Vercel CDN                            â”‚
â”‚  â”œâ”€â”€ Static Assets Caching                                     â”‚
â”‚  â”œâ”€â”€ Edge Functions                                            â”‚
â”‚  â””â”€â”€ Global Distribution                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ–¥ï¸ Vercel Platform                          â”‚
â”‚  â”œâ”€â”€ Next.js Application Server                                â”‚
â”‚  â”œâ”€â”€ API Routes                                                â”‚
â”‚  â”œâ”€â”€ Server-Side Rendering                                     â”‚
â”‚  â””â”€â”€ Environment Variables                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ”§ Supabase Cloud                         â”‚
â”‚  â”œâ”€â”€ ğŸ” Authentication Infrastructure                           â”‚
â”‚  â”œâ”€â”€ ğŸ—„ï¸ PostgreSQL Database                                     â”‚
â”‚  â”œâ”€â”€ ğŸ“Š Realtime Service                                        â”‚
â”‚  â”œâ”€â”€ ğŸ“ Storage Service                                         â”‚
â”‚  â””â”€â”€ ğŸ” Edge Functions                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é–‹ç™ºç’°å¢ƒæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local Machine  â”‚â”€â”€â”€â–¶â”‚   Next.js    â”‚â”€â”€â”€â–¶â”‚  Supabase    â”‚
â”‚                 â”‚    â”‚   Dev Server â”‚    â”‚  Local       â”‚
â”‚ npm run dev     â”‚    â”‚ localhost:3000â”‚    â”‚ Docker       â”‚
â”‚                 â”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ç›®æ¨™
| æ“ä½œ | ç›®æ¨™æ™‚é–“ | æœ€å¤§è¨±å®¹ |
|------|----------|----------|
| ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ | < 1ç§’ | 3ç§’ |
| API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ | < 500ms | 2ç§’ |
| DB ã‚¯ã‚¨ãƒª | < 100ms | 500ms |
| å½¼å¥³GETæŠ•ç¨¿ | < 2ç§’ | 5ç§’ |

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚â”€â”€â”€â–¶â”‚   Vercel     â”‚â”€â”€â”€â–¶â”‚  Supabase    â”‚
â”‚             â”‚    â”‚     CDN      â”‚    â”‚    Cache     â”‚
â”‚ Local Cache â”‚    â”‚ Edge Cache   â”‚    â”‚ Query Cache  â”‚
â”‚ 5min TTL    â”‚    â”‚ 1hour TTL    â”‚    â”‚ 1min TTL     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” ç›£è¦–ãƒ»ãƒ­ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ•ãƒ­ãƒ¼
```
Application Error â†’ Error Boundary â†’ Error Log Resource â†’ Database
                        â”‚                                      â”‚
                        â–¼                                      â–¼
                 Console Logging                        Structured Log
                        â”‚                                      â”‚
                        â–¼                                      â–¼
                  Development                            Production
                   Debug Info                           Analysis Data
```

### ç›£è¦–å¯¾è±¡
- **API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“**: å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ€§èƒ½**: ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“
- **ã‚¨ãƒ©ãƒ¼ç‡**: å±¤åˆ¥ãƒ»æ©Ÿèƒ½åˆ¥
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•**: æŠ•ç¨¿ãƒ»å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³
- **å½¼å¥³GETæŠ•ç¨¿ç›£è¦–**: ç‰¹åˆ¥ãªé‡è¦åº¦ã§ç›£è¦–

## ğŸ”§ é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Test Pyramid                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”º E2E Tests (å°‘æ•°ãƒ»é«˜ä¾¡å€¤)                                       â”‚
â”‚     â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å…¨ä½“ãƒ†ã‚¹ãƒˆ                                   â”‚
â”‚     â”œâ”€â”€ å½¼å¥³GETæŠ•ç¨¿ãƒ•ãƒ­ãƒ¼                                         â”‚
â”‚     â””â”€â”€ èªè¨¼ãƒ•ãƒ­ãƒ¼                                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”· Integration Tests (ä¸­ç¨‹åº¦)                                   â”‚
â”‚     â”œâ”€â”€ API + Database çµ±åˆãƒ†ã‚¹ãƒˆ                                â”‚
â”‚     â”œâ”€â”€ Controller + Task çµ±åˆãƒ†ã‚¹ãƒˆ                             â”‚
â”‚     â””â”€â”€ Frontend + API çµ±åˆãƒ†ã‚¹ãƒˆ                                â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”³ Unit Tests (å¤šæ•°ãƒ»é«˜é€Ÿ)                                       â”‚
â”‚     â”œâ”€â”€ Task Layer å˜ä½“ãƒ†ã‚¹ãƒˆ                                    â”‚
â”‚     â”œâ”€â”€ Resource Layer å˜ä½“ãƒ†ã‚¹ãƒˆ                                â”‚
â”‚     â”œâ”€â”€ Component å˜ä½“ãƒ†ã‚¹ãƒˆ                                     â”‚
â”‚     â””â”€â”€ Utility Function ãƒ†ã‚¹ãƒˆ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å®Ÿè£…æŒ‡é‡

### 1. **MVP SPAå®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
```
MVP: Core Backend + çµ±åˆSPA (ç¿’æ…£è¨˜éŒ²ãƒ»æŠ•ç¨¿ãƒ»å®šå‹ã‚³ãƒ¡ãƒ³ãƒˆçµ±åˆ)
- SPAçµ±åˆAPI + Database + èªè¨¼ã‚¤ãƒ³ãƒ•ãƒ©
- ç¿’æ…£è¨˜éŒ²ãƒ»æŠ•ç¨¿æ©Ÿèƒ½çµ±åˆ
- åŸºæœ¬çš„ãªå®šå‹ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

ç¯„å›²å¤– (Out of Scope):
- é«˜åº¦ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- SPAé–“é€£æºæ©Ÿèƒ½
- è¤‡é›‘ãªçŠ¶æ…‹å…±æœ‰
```

### 2. **SPAå¯¾å¿œã‚³ãƒ¼ãƒ‰çµ„ç¹”ãƒ»å‘½åè¦å‰‡**
```
src/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/          # {Service}DashboardApi.ts
â”‚   â”œâ”€â”€ controllers/  # {Service}DashboardController.ts  
â”‚   â”œâ”€â”€ tasks/        # {Action}{Entity}Task.ts
â”‚   â”œâ”€â”€ resources/    # {Entity}Resource.ts
â”‚   â””â”€â”€ responses/    # {Service}DashboardResponse.ts
â”œâ”€â”€ app/              # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰SPA
â”‚   â”œâ”€â”€ status/       # ç©ã¿ä¸Šã’SPA
â”‚   â”œâ”€â”€ social/       # SNS SPA
â”‚   â”œâ”€â”€ auth/         # èªè¨¼ç”»é¢
â”‚   â”œâ”€â”€ components/   # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ test/         # ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”œâ”€â”€ hooks/            # use{Service}Dashboard.ts
â”œâ”€â”€ lib/              # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç­‰
â””â”€â”€ shared/
    â”œâ”€â”€ config/       # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
    â””â”€â”€ types/        # å‹å®šç¾©
```

### 3. **SPAé–‹ç™ºãƒ•ãƒ­ãƒ¼**
1. **SPAè¨­è¨ˆ** â†’ **ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©** â†’ **çµ±åˆAPIä»•æ§˜**
2. **Resourceå®Ÿè£…** â†’ **Taskå®Ÿè£…** â†’ **DashboardControllerå®Ÿè£…** â†’ **APIå®Ÿè£…**
3. **å˜ä½“ãƒ†ã‚¹ãƒˆ** â†’ **ã‚»ã‚¯ã‚·ãƒ§ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆ** â†’ **SPA E2Eãƒ†ã‚¹ãƒˆ**
4. **SPAå®Ÿè£…** â†’ **ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“é€£æº** â†’ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸç¢ºèª**

---

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã«ã‚ˆã‚Šã€é–‹ç™ºãƒãƒ¼ãƒ å…¨ä½“ãŒåŒã˜ç†è§£ã‚’æŒã£ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚