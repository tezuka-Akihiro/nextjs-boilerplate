# projectname セクション共通UI仕様書

## 📋 概要

projectnameプロジェクトにおけるセクション内で共通利用されるUI仕様を定義します。各サービス（積み上げ・SNS）のセクション設計で統一して適用する共通ルール・パターンを記述します。

### 適用範囲
- セクション基本構成・レイアウト
- 状態管理・インタラクション
- レスポンシブ対応・アニメーション
- アクセシビリティ・技術実装

---

## 1. セクション基本構成

### セクションカード全体構成
```
┌─ [セクション名] ────────────────────────────────────┐
│ [アイコン] [セクション名]                  [状態表示] │ ← ヘッダー
├────────────────────────────────────────────────────┤
│                                                    │
│  ┌─ 主要データ表示エリア ─────────────────────────┐ │ ← メインコンテンツ
│  │ [重要指標] [数値・グラフ] [単位]               │ │
│  │ [進捗バー・ステータス表示]                     │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
│  ┌─ 操作・アクションエリア ───────────────────────┐ │ ← 操作エリア
│  │ [主要ボタン] [サブボタン]                      │ │
│  │ [入力フィールド（必要時のみ）]                  │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
│  ┌─ 補足情報・履歴エリア ─────────────────────────┐ │ ← 補足情報
│  │ [最新活動・履歴項目]                           │ │
│  │ [関連情報・ヒント]                             │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
└────────────────────────────────────────────────────┘
```

### セクションヘッダー仕様
```
┌─ セクションヘッダー ───────────────────────────────┐
│ [アイコン] [セクション名]                  [状態表示] │
├────────────────────────────────────────────────────┤
│ 左側: [アイコン] (24x24px) + [セクション名] (H2)    │
│ 右側: [状態・ステータス表示] (必要時のみ)           │
│ 高さ: 48px, パディング: 左右16px, 上下12px         │
└────────────────────────────────────────────────────┘
```

### エリア構成原則
- **主要データ表示エリア**: セクションの中心情報・指標表示
- **操作・アクションエリア**: ユーザーが実行可能な操作
- **補足情報・履歴エリア**: 活動履歴・ヒント・関連情報

---

## 2. 状態・インタラクション設計

### セクション状態パターン

#### 通常状態
```
┌─ 通常状態 ─────────────────────────────────────────┐
│ [アイコン] [セクション名]                          │
│ [メインデータ・操作エリア]                         │
│ [正常な値・ボタン・情報表示]                       │
└────────────────────────────────────────────────────┘
```

#### ローディング状態
```
┌─ ローディング状態 ─────────────────────────────────┐
│ [アイコン] [セクション名]                  ⟳ 更新中 │
│ [スケルトン・ローディング表示]                     │
│ [操作ボタン無効化]                                 │
└────────────────────────────────────────────────────┘
```

#### エラー状態
```
┌─ エラー状態 ───────────────────────────────────────┐
│ [アイコン] [セクション名]                    ⚠ エラー │
│ ❌ [エラーメッセージ]                              │
│ [再試行ボタン] [詳細表示ボタン]                    │
└────────────────────────────────────────────────────┘
```

#### 空データ状態
```
┌─ 空データ状態 ─────────────────────────────────────┐
│ [アイコン] [セクション名]                          │
│ 📭 [データなしメッセージ]                          │
│ [初期データ作成ボタン] [ヘルプリンク]              │
└────────────────────────────────────────────────────┘
```

### ユーザー操作フロー
```
[セクション表示]
      ↓ ユーザー操作
[操作実行・入力]
      ↓ 処理中
[ローディング表示] + [ボタン無効化]
      ↓ 完了・成功
[結果反映] + [成功フィードバック] + [他セクション連動更新]
      ↓ 失敗時
[エラー表示] + [再試行オプション]
```

### セクション間連携
```
[このセクションでの操作]
      ↓ 即座反映
[関連セクション A] ← データ更新・再描画
[関連セクション B] ← 関連データ更新  
[関連セクション C] ← カウンター・進捗更新

連携例:
- データ追加 → 一覧セクション項目追加 + 統計セクション数値更新
- 設定変更 → 表示セクション表示形式変更 + 操作セクションオプション更新
- 操作実行 → 結果セクション履歴追加 + 進捗セクション達成度更新
```

---

## 3. レスポンシブ・デバイス対応

### 共通表示原則（全デバイス統一）
```
📱 Mobile (375px)     💻 Desktop (1200px+)
┌─────────────────┐   ┌──────┬─────────────────┬──────┐
│ ┌─ Section ───┐ │   │ 余白  │ ┌─ Section ───┐ │ 余白  │
│ │ Header      │ │   │      │ │ Header      │ │      │
│ │ ┌─────────┐ │ │   │      │ │ ┌─────────┐ │ │      │
│ │ │ Content │ │ │ = │      │ │ │ Content │ │ │      │
│ │ └─────────┘ │ │   │      │ │ └─────────┘ │ │      │
│ │ Actions     │ │   │      │ │ Actions     │ │      │
│ └─────────────┘ │   │      │ └─────────────┘ │      │
└─────────────────┘   └──────┴─────────────────┴──────┘
        ↑                      ↑ 同一レイアウト ↑
```

### 要素配置調整

#### スマートフォン (375px以下)
- **フル幅表示**: margin: 0 16px
- **ボタン**: フル幅 or 2分割配置
- **フォント**: base 16px → 14px

#### タブレット・PC (768px以上)
- **中央固定**: width: 480px, 中央配置
- **ボタン**: インライン配置維持
- **フォント**: base 16px 維持
- **余白**: 左右auto（背景色で埋め）

### セクション間視覚的区切り
```
セクション間マージン: 16px
┌─ カード境界線 ─────────────────────┐
│  セクション内パディング: 20px      │ ← 内部余白
│  ┌─ 内容エリア ─────────────────┐ │
│  │                             │ │
│  │  セクション内容             │ │
│  │                             │ │
│  └─────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## 4. アニメーション・フィードバック

### データ更新アニメーション
```
数値変化: [前の値] → fade out → [新しい値] fade in (300ms)
進捗バー: 幅変化 + 色変化アニメーション (500ms ease-out)
状態変化: アイコン・色変化 + bounce effect (200ms)
成功操作: checkmark overlay + green flash (400ms)
```

### ローディング・待機状態
```
ボタンローディング: [ボタンテキスト] → [spinner + "処理中..."]
データ取得中: skeleton loading (グレーのプレースホルダー)
保存中: [保存ボタン] → [チェックマーク + "保存済み"] (2秒間)
```

### エラー・警告フィードバック
```
入力エラー: 赤枠 + shake animation + エラーメッセージ表示
操作失敗: エラーアイコン + 赤色フラッシュ (300ms)
警告表示: 黄色いアラートバー + fade in/out
```

---

## 5. アクセシビリティ・ユーザビリティ

### キーボード操作
```
Tab順序: セクション内を上から下、左から右に移動
Enter: 主要ボタンの実行
Space: チェックボックス・ラジオボタンの切り替え
Escape: モーダル・ドロップダウンのクローズ
```

### スクリーンリーダー対応
```
セクション: role="region", aria-labelledby="section-heading"
主要データ: aria-label="[項目名]: [値] [単位]"
進捗表示: aria-valuenow, aria-valuemin, aria-valuemax
状態変化: aria-live="polite" で更新を通知
```

### 視覚的配慮
```
色覚サポート: 色だけでなく形・テキストで状態表現
コントラスト: 背景とテキストのコントラスト比 4.5:1 以上
フォントサイズ: 最小14px、主要データは16px以上
タッチターゲット: ボタン・リンクの最小サイズ 44x44px
```

---

## 6. 技術実装仕様

### コンポーネント構造
```
[セクション名]Section.tsx
├─ SectionHeader.tsx
├─ DataDisplayArea.tsx
├─ ActionArea.tsx
├─ SupplementaryInfo.tsx
└─ hooks/
   ├─ use[セクション名]Data.ts
   ├─ use[セクション名]Actions.ts
   └─ use[セクション名]State.ts
```

### 状態管理
```typescript
interface [セクション名]State {
  // データ状態
  data: [データ型] | null
  loading: boolean
  error: string | null
  
  // UI状態
  expanded: boolean
  lastUpdated: Date | null
  
  // セクション固有状態
  [固有プロパティ]: [型]
}
```

### APIデータ取得
```typescript
// RTK Query でのデータ取得
const {
  data,
  error,
  isLoading,
  refetch
} = useGet[セクション名]DataQuery()

// WebSocket でのリアルタイム更新
const useWebSocket[セクション名]Updates = () => {
  // リアルタイム更新の実装
}
```

### 統合レイアウト統合パターン

#### 情報階層（全サービス共通）
```
階層1: サービスタイトル（H1）
├─ 階層2: セクションタイトル（H2）
│  ├─ 階層3: 主要データ（数値・ステータス）
│  │  ├─ 階層4: 補足情報
│  │  └─ 階層4: 操作要素（ボタン）
│  └─ 階層3: サブデータ
└─ 階層2: 次セクション...
```

#### 1サービス1SPA縦スクロール原則
```
┌─ 固定ヘッダー（sticky）──────────┐
│  サービス切り替えナビ            │
├──────────────────────────────────┤
│                                  │ ↕
│  全セクション縦積み               │ 全
│  （一元的な縦スクロール）         │ 体
│                                  │ ス
│  セクション1                     │ ク
│  セクション2                     │ ロ
│  セクション3                     │ |
│  セクション4                     │ ル
│                                  │
└──────────────────────────────────┘

※ページ遷移・URL変更なし
※ブラウザ履歴に影響しない
```

---

## 7. デザインシステム統合

### projectnameブランド適用

#### カラーパレット適用
- **プライマリ**: サイバーブルー(`#00D9FF`)
- **セカンダリ**: ネオングリーン(`#39FF14`)
- **アクセント**: エレクトリックパープル(`#BF00FF`)
- **背景**: ダークグレー系（`#1a1a1a`、`#2d2d2d`）

#### セクション固有スタイリング

##### セクションカード
```css
.section-card {
  background: var(--bg-card); /* #1A1A1A */
  border: 1px solid var(--bg-section); /* #2A2A2A */
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0,217,255,0.1);
  padding: 20px;
  margin-bottom: 16px;
}
```

##### セクションヘッダー
```css
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 48px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--bg-section);
  margin-bottom: 16px;
}

.section-title {
  font-size: var(--text-xl); /* 20px */
  font-weight: var(--font-semibold); /* 600 */
  color: var(--primary-cyber-blue); /* #00D9FF */
  text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
}
```

##### 状態表示
```css
.status-indicator {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
}

.status-loading { background: rgba(0, 217, 255, 0.2); color: #00D9FF; }
.status-error { background: rgba(255, 68, 68, 0.2); color: #FF4444; }
.status-success { background: rgba(57, 255, 20, 0.2); color: #39FF14; }
```

---

## 8. 実装ガイドライン

### コンポーネント作成時のチェックリスト
- [ ] 4つの基本状態（通常・ローディング・エラー・空データ）対応
- [ ] キーボード操作・アクセシビリティ対応
- [ ] アニメーション・フィードバック実装
- [ ] セクション間連携・状態管理
- [ ] ブランドカラー・スタイリング適用

### パフォーマンス最適化
- **遅延読み込み**: 画面外セクションの遅延レンダリング
- **メモ化**: 重いコンポーネントのReact.memo適用
- **仮想化**: 大量データ表示時のリスト仮想化
- **キャッシュ**: RTK QueryのAPIキャッシュ活用

### テスト戦略
- **単体テスト**: セクション内機能の個別テスト
- **統合テスト**: セクション間連携のテスト
- **ビジュアルテスト**: デザイン・アニメーションの回帰テスト
- **アクセシビリティテスト**: スクリーンリーダー・キーボード操作テスト

---

## 📚 関連ドキュメント

### デザインシステム
- **[Brand Identity](./brand-identity.md)** - ブランド・色・フォント仕様
- **[Layout System](./layout-system.md)** - グリッド・レイアウト・レスポンシブ
- **[Common UI Specifications](./common-ui-specifications.md)** - サイト横断共通UI

### テンプレート
- **[Section Template](../templates/wireframe/section.md)** - セクション個別仕様テンプレート
- **[Service Template](../templates/wireframe/service.md)** - サービス統合ダッシュボードテンプレート

### アーキテクチャ
- **[System Architecture](../architecture/system-architecture.md)** - システム全体設計
- **[API Specification](../architecture/api-specification.md)** - API仕様

---

> **💡 Key Principle**: 
> セクション共通UI仕様は「一貫性」と「再利用性」を両立し、開発効率とユーザー体験の向上を目指します。

> **🎯 Implementation Goal**:
> 全セクションで統一されたUI・UXパターンを提供し、学習コストを削減しつつ直感的な操作環境を構築します。